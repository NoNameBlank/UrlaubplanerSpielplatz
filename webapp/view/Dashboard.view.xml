<mvc:View controllerName="urlaubsplaner.urlaubsplaner.controller.Dashboard" xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m" xmlns:unified="sap.ui.unified" xmlns:core="sap.ui.core">
    <Page id="page" showHeader="false">
        <content>
            <Panel>
			<headerToolbar>
				<OverflowToolbar>
					<Title text="Nutzerdaten"/>
				</OverflowToolbar>
			</headerToolbar>
			<HBox>
				<VBox class="sapUiSmallMargin">
					<Avatar icon="sap-icon://person-placeholder"/>
				</VBox>
				<VBox class="sapUiSmallMargin">

					<Label text="Guten Tag {VacationModel>/User/Username}" />
					<Label text = "{VacationModel>/User/VacationLeft} Urlaubstage Verbleibend" />
					<Label text = "Davon sind {VacationModel>/User/VacationLastYear} Tage aus dem Vorjahr" />
					<Label text = "Es wurden bereits {VacationModel>/User/VacationPlaned} Tage beantragt" />
					
				</VBox>
			</HBox>
            </Panel >
            <Label />

			

            <Panel>
				<headerToolbar>
					<OverflowToolbar>
						<Title text="Urlaubsplanung"/>
					</OverflowToolbar>
				</headerToolbar>
            <VBox class="sapUiSmallMargin">
		<PlanningCalendar
			id="PC1"
			rows="{path: '/people'}"
			appointmentsVisualization="Filled"
			appointmentSelect="handleAppointmentSelect"
			showEmptyIntervalHeaders="false"
			viewKey="D"
			showWeekNumbers="true"
			visible="{= ${VacationModel>/User/Role} === 'Teamleiter' ? true : false}">
			<toolbarContent>
				<Title text="Urlaub planen" titleStyle="H4"/>
                <OverflowToolbarButton icon="sap-icon://add" tooltip="Buchen" press="onOpenDialog"/>
			</toolbarContent>
			<views>
				<PlanningCalendarView
					key="D"
					intervalType="Day"  
					startDate="{VacationModel>/FirstDay}"
					description="Wochenansicht"
					intervalsS="1"
					intervalsM="3"
					intervalsL="7"
					showSubIntervals="false">
				</PlanningCalendarView>
				<PlanningCalendarView
					key="M"
					intervalType="Month"  
					startDate="{VacationModel>/FirstDay}"
					description="Jahresansicht"
					intervalsS="12"
					intervalsM="12"
					intervalsL="12"
					showSubIntervals="false">
				</PlanningCalendarView>
			</views>
			<rows>
				<PlanningCalendarRow
					icon="{pic}"
					title="{name}"
					text="{role}"
					appointments="{path : 'appointments', templateShareable: false}"
					intervalHeaders="{path: 'headers', templateShareable: false}">
					<customData>
						<core:CustomData key="emp-name" value="{name}" writeToDom="true"/>
					</customData>
					<appointments>
						<unified:CalendarAppointment
							startDate="{start}"
							endDate="{end}"
							icon="{pic}"
							title="{title}"
							text="{info}"
							type="{type}"
							tentative="{tentative}">
						</unified:CalendarAppointment>
					</appointments>
					<intervalHeaders>
						<unified:CalendarAppointment
							startDate="{start}"
							endDate="{end}"
							icon="{pic}"
							title="{title}"
							type="{type}">
						</unified:CalendarAppointment>
					</intervalHeaders>
				</PlanningCalendarRow>
			</rows>
		</PlanningCalendar>
	</VBox>
            
            </Panel>


        </content>
    </Page>
</mvc:View>
